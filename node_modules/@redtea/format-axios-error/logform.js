"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.axiosError = void 0;
const format_js_1 = __importDefault(require("logform/format.js"));
const symbols_1 = require("./symbols");
const core_1 = require("./core");
exports.axiosError = format_js_1.default((error) => {
    const storedInMessage = core_1.isAxiosError(error.message);
    const axiosError = storedInMessage
        ? error.message
        : core_1.isAxiosError(error)
            ? error
            : undefined;
    if (!axiosError) {
        return error;
    }
    const info = core_1.format(axiosError);
    if (storedInMessage) {
        Object.assign(error, info, {
            message: info.message,
            stack: info.stack,
            [symbols_1.LEVEL]: error[symbols_1.LEVEL] || error.level || 'error',
            [symbols_1.MESSAGE]: error[symbols_1.MESSAGE] || info.message,
        });
        return error;
    }
    Object.assign(info, {
        level: error.level || 'error',
        [symbols_1.LEVEL]: error[symbols_1.LEVEL] || error.level || 'error',
        [symbols_1.MESSAGE]: error[symbols_1.MESSAGE] || info.message
    });
    return info;
});
